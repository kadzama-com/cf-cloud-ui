(this.webpackJsonpcloud=this.webpackJsonpcloud||[]).push([[0],{111:function(e,t,a){},113:function(e,t,a){},118:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},246:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(66),r=a.n(c),l=(a(154),a(40)),i=a(22);a(155);const o=Object(n.createContext)();a(111);var j=a(52);a(156),a(132),a(248),a(247);const d={apiKey:"AIzaSyBP3MDb5upM0oEEHnCKp5GYX0OUowkbvQE",authDomain:"kadzama3dprinter.firebaseapp.com",projectId:"kadzama3dprinter",storageBucket:"kadzama3dprinter.appspot.com",messagingSenderId:"957194061920",appId:"1:957194061920:web:463d3b0992b64378139b05",measurementId:"G-X5N8W274ZC"};j.a.initializeApp(d);const b=j.a.auth(),u=j.a.firestore(),h=j.a.storage(),O=(j.a.analytics(),async e=>{try{const t=Date.now(),a=e.path,n=localStorage.getItem(a),s=n?JSON.parse(n):null,c=s?s.ttl:null;let r=s?s.items:null;if((!c||t>c)&&(r=null),!r){r=[];const n=t+1e3;(await e.get()).docs.forEach((e=>{r=[...r,{...e.data(),id:e.id}]})),localStorage.setItem(a,JSON.stringify({items:r,ttl:n}))}return r}catch(t){console.log(t)}});var x=a(8),m=a(25),p=a.p+"static/media/logo.8bc7b652.png",f=a(2);function g(){const{setUser:e}=Object(n.useContext)(o),[t,a]=Object(n.useState)(),[s,c]=Object(n.useState)(),[r,i]=Object(n.useState)(null);return Object(f.jsx)("div",{className:"text-center login-wrapper",children:Object(f.jsxs)(x.a,{className:"form-signin",onSubmit:async a=>{a.preventDefault(),await b.signInWithEmailAndPassword(t,s).then((t=>{e(t)})).catch((e=>{i(e.message)}))},children:[Object(f.jsx)("img",{className:"mb-4",src:p,alt:"",width:"120"}),Object(f.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(f.jsxs)(x.a.Group,{controlId:"inputEmail",children:[Object(f.jsx)(x.a.Label,{className:"sr-only",children:"Email"}),Object(f.jsx)(x.a.Control,{type:"email",placeholder:"Enter email",onChange:e=>a(e.target.value)}),Object(f.jsx)(x.a.Text,{className:"text-danger",children:r})]}),Object(f.jsxs)(x.a.Group,{controlId:"inputPassword",children:[Object(f.jsx)(x.a.Label,{className:"sr-only",children:"Password"}),Object(f.jsx)(x.a.Control,{type:"password",placeholder:"Password",onChange:e=>c(e.target.value)})]}),Object(f.jsx)(m.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Log in"}),Object(f.jsx)(l.b,{className:"nav-link",to:"/signup",children:"Create account"})]})})}function v(){const{setUser:e}=Object(n.useContext)(o),[t,a]=Object(n.useState)(),[s,c]=Object(n.useState)(),[r,i]=Object(n.useState)(null);return Object(f.jsx)("div",{className:"text-center login-wrapper",children:Object(f.jsxs)(x.a,{className:"form-signin",onSubmit:async a=>{a.preventDefault();try{const a=await b.createUserWithEmailAndPassword(t,s);e(a),console.log(a)}catch(a){i(a.message)}},children:[Object(f.jsx)("img",{className:"mb-4",src:p,alt:"",width:"120"}),Object(f.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Create account"}),Object(f.jsxs)(x.a.Group,{controlId:"inputEmail",children:[Object(f.jsx)(x.a.Label,{className:"sr-only",children:"Email"}),Object(f.jsx)(x.a.Control,{type:"email",placeholder:"Enter email",onChange:e=>a(e.target.value)}),Object(f.jsx)(x.a.Text,{className:"text-danger",children:r})]}),Object(f.jsxs)(x.a.Group,{controlId:"inputPassword",children:[Object(f.jsx)(x.a.Label,{className:"sr-only",children:"Password"}),Object(f.jsx)(x.a.Control,{type:"password",placeholder:"Password",onChange:e=>c(e.target.value)})]}),Object(f.jsx)(m.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Sign up"}),Object(f.jsx)(l.b,{className:"nav-link",to:"/login",children:"Log in"})]})})}var y=a(85),C=a(19),w=a(17);function S(e){let{updatePlot:t,setDrawSettings:a}=e;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(x.a,{children:[Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0437\u043b\u0430\u043c\u0438, \u043c\u043c"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2.0",onChange:e=>a({delta:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0437\u0438\u044f, \u0435\u0434./\u043c\u043c"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.03",onChange:e=>a({e_per_mm:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Z, \u043c\u043c"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.25",onChange:e=>a({z:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Float"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2400",onChange:e=>a({f:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u0447\u0430\u0442\u0438, \u043c\u043c"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"120",onChange:e=>a({print_size_mm:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u043e\u043b\u0430, \u043c\u043c"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"200",onChange:e=>a({table_size_mm:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 X, \u043c\u043c"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>a({offset_x:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 Y, \u043c\u043c"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:e=>a({offset_y:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0435\u0440"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",min:"0",max:"1",defaultValue:"0",onChange:e=>a({tool:e.target.value})})})]})]}),Object(f.jsx)(m.a,{onClick:()=>t(),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})}const N="https://printer-api.kadzama.com";var k=a(135),L=a.n(k),E=a(83),z=a(72);function _(e){return Object(n.useEffect)((()=>{}),[e.plotData,e.fetchError]),e.fetchError?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(z.a,{variant:"danger",children:e.fetchError})}):e.plotData?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(L.a,{data:e.plotData.data,layout:{showlegend:!1,xaxis:{scaleanchor:"y",scaleratio:1},height:.6*window.innerHeight}})}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(E.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var P=a(31);function T(e,t){return{...e,...t}}function F(e){return(e=>h.ref("user").child(e).child("drawing.gcode"))(e).getDownloadURL().catch((function(e){console.log(e)}))}function M(){const{user:e}=Object(n.useContext)(o),t=e.user.uid,[a,s]=Object(n.useState)("#"),[c,r]=Object(n.useState)(null),[l,i]=Object(n.useState)(null),[j,d]=Object(n.useReducer)(T,{});function b(e,t){return i(null),i(null),r(null),fetch(N+"/api/user/"+e+"/drawing/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(201===e.status||200===e.status)return e.json();throw 204===e.status?i('\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435" \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043f\u0435\u0447\u0430\u0442\u044c'):i("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),new Error(e)})).then((e=>{r(JSON.parse(e))})).catch((e=>{P.a(new Error(e))}))}return Object(n.useEffect)((()=>{let e=!0;return F(t).then((t=>{e&&s(t)})),b(t,{}),()=>e=!1}),[t]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(y.a,{fluid:"xl",children:[Object(f.jsxs)(C.a,{children:[Object(f.jsx)(w.a,{sm:8,children:Object(f.jsx)(_,{fetchError:l,plotData:c})}),Object(f.jsx)(w.a,{sm:4,children:Object(f.jsx)(S,{updatePlot:function(){b(t,j),F(t).then((e=>s(e)))},setDrawSettings:d})})]}),Object(f.jsx)(C.a,{children:Object(f.jsxs)(w.a,{children:[Object(f.jsx)(m.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c GCODE"}),Object(f.jsx)(m.a,{as:"a",target:"_blank",href:"/draw",className:"control-button",size:"lg",variant:"secondary",children:"\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(f.jsx)(m.a,{disabled:!0,className:"control-button",variant:"secondary",size:"lg",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})]})})]})})}var G=a(255),I=a(43),D=a(256),V=a(252);const U=Object(n.createContext)();a(166);function B(e){let{model:t,...a}=e;const{setCurrentModel:s}=Object(n.useContext)(U);return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(D.a,{className:"model-card",onClick:()=>s(t),role:"button",children:[Object(f.jsx)(D.a.Img,{className:"model-card-image",variant:"top",src:function(e){let t;return e.some((e=>(t=e.image.src,e.is_thumbnail))),t}(t.images)}),Object(f.jsxs)(D.a.Body,{children:[Object(f.jsx)(D.a.Title,{children:t.name}),Object(f.jsx)(D.a.Text,{children:Object(f.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}})}),Object(f.jsxs)(V.a,{variant:"secondary",children:[t.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(f.jsxs)(V.a,{variant:"secondary",children:[t.pieces_num," \u0448\u0442."]})," ",Object(f.jsx)(V.a,{variant:"secondary",children:t.piece_size})," ",Object(f.jsx)(V.a,{variant:"secondary",children:t.colors_num})," "]})]},t.id)})}a(167);function R(){const[e,t]=Object(n.useState)([]),[a,s]=Object(n.useState)([]),[c,r]=Object(n.useState)(""),[l,i]=Object(n.useState)(null),[o,j]=Object(n.useState)(!1),d=async()=>{j(!0);let e=await O(u.collection("storage/model-library/public").orderBy("name"));t((t=>[...e]));let a=await O(u.collection("storage/model-library/tags").orderBy("name"));s((e=>[...a])),j(!1)};return Object(n.useEffect)((()=>{d()}),[]),Object(f.jsx)("div",{className:"model-list-wrapper",children:Object(f.jsxs)(y.a,{children:[Object(f.jsx)(C.a,{className:"model-tags-row",children:Object(f.jsx)(G.a.Container,{id:"model-tags-tabs",defaultActiveKey:"0",children:Object(f.jsxs)(I.a,{variant:"pills",children:[Object(f.jsx)(I.a.Item,{children:Object(f.jsx)(I.a.Link,{disabled:!0,eventKey:"-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(f.jsx)(I.a.Item,{children:Object(f.jsx)(I.a.Link,{eventKey:"0",onClick:e=>i(null),children:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"})}),a&&a.map(((e,t)=>Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(I.a.Item,{children:Object(f.jsx)(I.a.Link,{eventKey:e.id,onClick:t=>i(e.id),children:e.name})})})))]})})}),Object(f.jsx)(x.a,{children:Object(f.jsx)(x.a.Row,{children:Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:e=>r(e.target.value)})})})}),Object(f.jsxs)(C.a,{children:[o&&Object(f.jsx)(C.a,{className:"spiner-wrapper",children:Object(f.jsx)(E.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"visually-hidden"})})}),e&&(()=>{let t=[...e];return l&&(t=t.filter((e=>{var t;return null===(t=e.tag_ids)||void 0===t?void 0:t.includes(l)}))),t.filter((e=>e.name.toUpperCase().includes(c.toUpperCase())))})().map(((e,t)=>Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(B,{model:e},e.id)})))]})]})})}var A=a(254);function J(){const{currentModel:e,cleanCurrentModel:t}=Object(n.useContext)(U);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(m.a,{variant:"link",onClick:t,children:"\u27f5 \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"}),Object(f.jsxs)(C.a,{children:[Object(f.jsx)(w.a,{sm:5,children:Object(f.jsx)(A.a,{children:e.images.map((e=>Object(f.jsx)(A.a.Item,{children:Object(f.jsx)("img",{className:"d-block w-100",src:e.image.src,alt:"First slide"})})))})}),Object(f.jsxs)(w.a,{sm:7,children:[Object(f.jsx)("h2",{children:e.name}),Object(f.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}),Object(f.jsxs)("h4",{children:[Object(f.jsxs)(V.a,{variant:"secondary",children:[e.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(f.jsxs)(V.a,{variant:"secondary",children:[e.pieces_num," \u0448\u0442."]})," ",Object(f.jsx)(V.a,{variant:"secondary",children:e.piece_size})," ",Object(f.jsx)(V.a,{variant:"secondary",children:e.colors_num})," "]}),Object(f.jsx)("h4",{children:"\u0424\u0430\u0439\u043b\u044b"}),Object(f.jsx)("ul",{children:e.files.map((e=>Object(f.jsx)("li",{children:Object(f.jsx)(m.a,{as:"a",target:"_blank",variant:"link",href:e.file.src,download:e.file.title,children:e.name||e.file.title})})))})]})]})]})}a(168);function X(){const{currentModel:e,setCurrentModel:t,cleanCurrentModel:a}=function(){const[e,t]=Object(n.useState)(null);return{currentModel:e,setCurrentModel:t,cleanCurrentModel:()=>{t(null)}}}();return e?Object(f.jsx)("div",{className:"wrapper",children:Object(f.jsx)(U.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(f.jsx)(y.a,{fluid:"xl",children:Object(f.jsx)(J,{})})})}):Object(f.jsx)("div",{className:"wrapper",children:Object(f.jsx)(U.Provider,{value:{currentModel:e,setCurrentModel:t,cleanCurrentModel:a},children:Object(f.jsxs)(y.a,{fluid:"xl",children:[Object(f.jsx)("h2",{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0435\u0439"}),Object(f.jsx)(R,{})]})})})}var Y=a(41),W=a(144);const H=Object(W.a)({wrapper:{padding:[15]}});function K(){const e=H(),{user:t,removeUser:a}=Object(n.useContext)(o);return Object(f.jsx)("div",{className:e.wrapper,children:Object(f.jsxs)(Y.a,{className:"justify-content-between",expand:"lg",children:[Object(f.jsx)(Y.a.Brand,{children:Object(f.jsx)(l.b,{className:"navbar-brand",to:"/",children:"Chocolate Fiesta Cloud \u03b2"})}),Object(f.jsx)(Y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsxs)(Y.a.Collapse,{id:"basic-navbar-nav",children:[Object(f.jsxs)(I.a,{className:"mr-auto",children:[Object(f.jsx)(l.b,{className:"nav-link",to:"/library",children:"Models Library"}),Object(f.jsx)(l.b,{className:"nav-link",to:"/draw-print",children:"Drawing Print"}),Object(f.jsx)(l.b,{className:"nav-link",to:"/stl-generator",children:"3D Text Generator"})]}),Object(f.jsxs)(I.a,{className:"ml-auto",children:[Object(f.jsxs)(I.a.Link,{disabled:!0,children:["You are logged in as ",t.user.email]}),Object(f.jsx)(I.a.Link,{onClick:a,children:"Log out"})]})]})]})})}a(170);function Z(){return Object(f.jsx)("div",{className:"dash-wrapper",children:Object(f.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e Chocolate Fiesta Cloud"})})}const Q=s.a.createContext(),q=e=>{let{children:t}=e;const[a,s]=Object(n.useState)(!1),[c,r]=Object(n.useState)(!1),l=Object(n.useRef)(null),i=Object(n.useRef)(null),[o,j]=Object(n.useState)([]),[d,b]=Object(n.useState)([]),[u,h]=Object(n.useState)([]),O=e=>{if("mousemove"===e.type||"mousedown"===e.type){const{offsetX:t,offsetY:a}=e;return{offsetX:t,offsetY:a}}if("touchstart"===e.type||"touchmove"===e.type){const t=e.target.getBoundingClientRect();return{offsetX:e.touches[0].pageX-t.left,offsetY:e.touches[0].pageY-t.top}}};return Object(f.jsx)(Q.Provider,{value:{canvasRef:l,contextRef:i,x:o,y:d,stops:u,isPrepared:a,prepareCanvas:()=>{if(a)return;const e=l.current,t=Math.min(window.innerWidth,window.innerHeight-128);e.width=2*t,e.height=2*t,e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px");const n=e.getContext("2d");n.scale(2,2),n.lineCap="round",n.strokeStyle="brown",n.lineWidth=14,i.current=n,s(!0)},startDrawing:e=>{let{nativeEvent:t}=e;const{offsetX:a,offsetY:n}=O(t);i.current.beginPath(),i.current.moveTo(a,n),r(!0)},finishDrawing:()=>{i.current.closePath(),r(!1),h([...u,o.length-1])},clearCanvas:()=>{const e=l.current,t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),j([]),b([]),h([])},draw:e=>{let{nativeEvent:t}=e;if(!c)return;const{offsetX:a,offsetY:n}=O(t);i.current.lineTo(a,n),i.current.stroke(),j([...o,a]),b([...d,n])}},children:t})},$=()=>Object(n.useContext)(Q);a(171);function ee(){const{canvasRef:e,prepareCanvas:t,startDrawing:a,finishDrawing:s,draw:c}=$();return Object(n.useEffect)(t,[t]),Object(f.jsx)("canvas",{onMouseDown:a,onMouseUp:s,onMouseMove:c,onTouchStart:a,onTouchEnd:s,onTouchMove:c,ref:e})}a(113);function te(){const{user:e}=Object(n.useContext)(o),{x:t,y:a,stops:s}=$(),[c,r]=Object(n.useState)(!1);function l(){return(n=e.user.uid,u.collection("user-drawing").doc(n)).set({x:t,y:a,stops:s});var n}function i(){const[e,a]=Object(n.useState)(!1);Object(n.useEffect)((()=>{e&&l().then((()=>{a(!1),r(!0)}))}),[e]);return Object(f.jsx)(m.a,{disabled:e||c||0===t.length,className:"control-button",size:"lg",variant:"success",onClick:e?null:()=>{a(!0)},children:e?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":c?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})}return Object(n.useEffect)((()=>{r(!1)}),[t]),Object(f.jsx)(i,{})}function ae(){const{x:e,clearCanvas:t}=$();return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"controls-wrapper",children:Object(f.jsx)(Y.a,{fixed:"bottom",bg:"dark",className:"justify-content-center",children:Object(f.jsxs)(I.a,{children:[Object(f.jsx)(m.a,{onClick:t,disabled:0===e.length,className:"control-button",size:"lg",variant:"light",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(f.jsx)(te,{})]})})})})}var ne=a(146);a(216);function se(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{children:Object(f.jsxs)(Y.a,{bg:"dark",variant:"dark",className:"justify-content-center",children:[Object(f.jsx)(Y.a.Brand,{href:"/",children:"Chocolate Fiesta Draw"}),Object(f.jsx)(Y.a.Collapse,{id:"basic-navbar-nav",children:Object(f.jsx)(I.a,{className:"ml-auto",children:Object(f.jsx)(I.a.Link,{href:"/draw-print",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0435\u0447\u0430\u0442\u0438"})})})]})})})}var ce=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"draw-app-wrapper",children:Object(f.jsx)(ne.a,{...d,firebase:j.a,children:Object(f.jsxs)(q,{children:[Object(f.jsx)(se,{}),Object(f.jsx)(ee,{}),Object(f.jsx)(ae,{})]})})})})};a(217);function re(e){let{updateSTL:t,setStlSettings:a}=e;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(x.a,{children:[Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Text"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"text",defaultValue:"Chocolate Fiesta",onChange:e=>a({text:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Heigth, mm"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"5",onChange:e=>a({depth:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Width, mm"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"100",onChange:e=>a({width:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Heigth of foundation, mm"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2",onChange:e=>a({foundation_depth:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Width of foundation, mm"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2",onChange:e=>a({foundation_offset:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Word merger foundation width, mm"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"7",onChange:e=>a({foundation_joiner_height:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Letter spacing, mm"}),Object(f.jsx)(w.a,{children:Object(f.jsx)(x.a.Control,{size:"sm",type:"number",defaultValue:"1.0",onChange:e=>a({text_spacing:e.target.value})})})]}),Object(f.jsxs)(x.a.Group,{as:C.a,children:[Object(f.jsx)(x.a.Label,{column:!0,children:"Font"}),Object(f.jsx)(w.a,{children:Object(f.jsx)("div",{className:"mb-3",children:[{value:"Pacifico",title:"Pacifico",class:"fontPacifico"},{value:"Liberation Sans:style=Bold",title:"Sans Bold",class:"fontPTSans"},{value:"Liberation Serif:style=Bold Italic",title:"Serif Bold",class:"fontPTSerif"},{value:"Raleway:style=Black",title:"Raleway Black",class:"fontRaleway"},{value:"Lobster",title:"Lobster",class:"fontLobster"},{value:"Vollkorn:style=Black",title:"Vollkorn",class:"fontVollkorn"},{value:"Alegreya Sans:style=Black Italic",title:"Alegreya Sans",class:"fontAlegreya"},{value:"Vesterbro",title:"Vesterbro",class:"fontVollkorn"}].map(((e,t)=>Object(f.jsx)(x.a.Check,{defaultChecked:0===t,id:e.value,type:"radio",label:e.title,name:"radio-font",className:e.class,onChange:e=>{console.log("UPDATE STATE"),a({font:e.target.id})}},e.value)))},"defaultradio")})]})]}),Object(f.jsx)(m.a,{onClick:()=>t(),children:"Generate"})]})}a(118);var le=a(142);function ie(e){return Object(n.useEffect)((()=>{}),[e.stlUrl,e.fetchStlError]),e.fetchStlError?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(z.a,{variant:"danger",children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})}):""===e.stlUrl?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(z.a,{variant:"primary",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e 1 \u043c\u0438\u043d\u0443\u0442\u044b."}),Object(f.jsx)(E.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(le.ModelViewer,{width:"100%",aspectgRatio:"100%",rotationSpeeds:[0,0,0],initControlPosition:[0,0,.4],backgroundColor:"#ffffff",url:e.stlUrl})})}function oe(e,t){return{...e,...t}}function je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return fetch(e,t).then((n=>{if(n.ok)return n.json();if(a>0)return je(e,t,a-1);throw new Error(n)})).catch((n=>{if(a>0)return je(e,t,a-1);throw new Error(n)}))}function de(){const{user:e}=Object(n.useContext)(o),t=e.user.uid,[a,s]=Object(n.useState)(""),[c,r]=Object(n.useReducer)(oe,{}),[l,i]=Object(n.useState)(!1);function j(e,t){return s(""),i(!1),je(N+"/api/stl-generator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{e?s(e.url):(i(!0),P.a(new Error(e)))})).catch((e=>{i(!0),P.a(new Error(e))}))}return Object(n.useEffect)((()=>{let e=!0;return j(0,{}).then((t=>{e&&null!=t&&s(t.url)})),()=>e=!1}),[t]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(y.a,{fluid:"xl",className:"stl-generator-wrapper",children:[Object(f.jsxs)(C.a,{children:[Object(f.jsx)(w.a,{sm:7,children:Object(f.jsx)(ie,{fetchStlError:l,stlUrl:a})}),Object(f.jsx)(w.a,{sm:5,children:Object(f.jsx)(re,{updateSTL:function(){j(0,c)},setStlSettings:r})})]}),Object(f.jsx)(C.a,{children:Object(f.jsxs)(w.a,{children:[Object(f.jsx)(m.a,{as:"a",target:"_blank",href:a,className:"control-button",size:"lg",variant:"primary",download:!0,children:"Download STL"}),Object(f.jsx)(m.a,{disabled:!0,className:"control-button",size:"lg",variant:"primary",children:"Send to printer"})]})})]})})}var be=function(){const{user:e,setUser:t,removeUser:a}=function(){const[e,t]=Object(n.useState)((()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){console.log("Error getting user from localStorage",e)}return null})()),a=e=>{localStorage.setItem("user",JSON.stringify(e)),t(e)};return{setUser:a,user:e,removeUser:()=>{a(null)}}}();return Object(f.jsx)(o.Provider,{value:{user:e,setUser:t,removeUser:a},children:Object(f.jsx)(l.a,{children:e?Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{exact:!0,path:"/draw",children:Object(f.jsx)(ce,{})}),Object(f.jsxs)(i.b,{path:"/",children:[Object(f.jsx)(K,{}),Object(f.jsx)(i.b,{path:"/draw-print",children:Object(f.jsx)(M,{})}),Object(f.jsx)(i.b,{path:"/library",children:Object(f.jsx)(X,{})}),Object(f.jsx)(i.b,{path:"/slicer",children:Object(f.jsx)(Z,{})}),Object(f.jsx)(i.b,{path:"/stl-generator",children:Object(f.jsx)(de,{})}),Object(f.jsx)(i.b,{path:"/*",children:Object(f.jsx)(i.a,{to:"/draw-print"})})]})]}):Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{path:"/login",children:Object(f.jsx)(g,{})}),Object(f.jsx)(i.b,{path:"/signup",children:Object(f.jsx)(v,{})}),Object(f.jsx)(i.b,{path:"/*",children:Object(f.jsx)(i.a,{to:"/login"})})]})})})};var ue=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,257)).then((t=>{let{getCLS:a,getFID:n,getFCP:s,getLCP:c,getTTFB:r}=t;a(e),n(e),s(e),c(e),r(e)}))},he=(a(245),a(253)),Oe=a(145);he.a({dsn:"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853",integrations:[new Oe.a.BrowserTracing],tracesSampleRate:1}),r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(be,{})}),document.getElementById("root")),ue()}},[[246,1,2]]]);
//# sourceMappingURL=main.03c87831.chunk.js.map