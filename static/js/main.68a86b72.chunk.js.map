{"version":3,"sources":["components/App/useUser.js","components/App/firebase.js","components/App/logo.png","components/Auth/Login.js","components/Auth/Signup.js","components/DrawPrint/SettingsForm.js","components/App/config.js","components/DrawPrint/PlotViewer.js","components/DrawPrint/DrawPrint.js","components/Library/Model/ModelContext.js","components/Library/Model/ModelCard.js","components/Library/Model/ModelList.js","components/Library/Model/ModelPage.js","components/Library/Library.js","components/Navigation/Navigation.js","components/Slicer/Slicer.js","components/DrawApp/Canvas/CanvasContext.js","components/DrawApp/Canvas/Canvas.js","components/DrawApp/Controls/SendToPrintButton.js","components/DrawApp/Controls/Controls.js","components/DrawApp/Header/Header.js","components/DrawApp/DrawApp.js","components/STLGenerator/SettingsForm.js","components/STLGenerator/Viewer.js","components/STLGenerator/STLGenerator.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["UserContext","createContext","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","auth","db","firestore","storage","retrieveCachedCollection","analytics","async","now","Date","storageKey","collection","path","itemsJson","localStorage","getItem","itemsWithTTL","JSON","parse","ttl","items","invalidateAt","get","docs","forEach","item","data","id","setItem","stringify","e","console","log","Login","setUser","useContext","email","setEmail","useState","password","setPassword","error","setError","className","Form","onSubmit","preventDefault","signInWithEmailAndPassword","then","user","catch","message","src","logo","alt","width","Group","controlId","Label","Control","type","placeholder","onChange","target","value","Text","Button","to","SignUp","userCredential","createUserWithEmailAndPassword","SettingsForm","updatePlot","setDrawSettings","as","Row","column","Col","size","step","defaultValue","delta","e_per_mm","z","f","print_size_mm","table_size_mm","offset_x","offset_y","min","max","tool","onClick","fiestaCloudBackend","process","PlotViewer","props","useEffect","plotData","fetchError","Alert","variant","layout","showlegend","xaxis","scaleanchor","scaleratio","height","window","innerHeight","Spinner","animation","role","reducer","state","getGcodeUrl","uid","ref","child","storageUserDrawingGcodeRef","getDownloadURL","DrawPrint","user_id","gcodeFileUrl","setGcodeFileUrl","plot","setPlot","setFetchError","drawSettings","useReducer","getUserDrawingPlot","settings","fetch","method","headers","body","res","status","json","Error","Sentry","mounted","url","Container","fluid","sm","href","download","disabled","ModelContext","ModelCard","model","setCurrentModel","Card","Img","images","thumbnail","some","el","image","is_thumbnail","getThumbnailImage","Body","Title","name","dangerouslySetInnerHTML","__html","description","Badge","print_time","pieces_num","piece_size","colors_num","ModelList","models","setModels","tags","setTags","searchQuery","setSearchQuery","selectedTagId","setSelectedTagId","isLoading","setLoading","fetchModels","orderBy","prevState","Tab","defaultActiveKey","Nav","Item","Link","eventKey","map","tag","idx","filtered_models","filter","tag_ids","includes","toUpperCase","filteredModels","ModelPage","currentModel","cleanCurrentModel","Carousel","files","file","title","Library","useModel","Provider","useStyles","createUseStyles","wrapper","padding","Navigation","classes","removeUser","Navbar","expand","Brand","Toggle","Collapse","Slicer","CanvasContext","React","CanvasProvider","children","isPrepared","setPrepared","isDrawing","setIsDrawing","canvasRef","useRef","contextRef","x","setX","y","setY","stops","setStops","getEventPosition","nativeEvent","offsetX","offsetY","rect","getBoundingClientRect","touches","pageX","left","pageY","top","prepareCanvas","canvas","current","canvasSize","Math","innerWidth","navbarHeight","style","context","getContext","scale","lineCap","strokeStyle","lineWidth","startDrawing","beginPath","moveTo","finishDrawing","closePath","length","clearCanvas","fillStyle","fillRect","draw","lineTo","stroke","useCanvas","Canvas","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","SendToPrintButton","isDisabled","setDisabled","sendToDB","doc","set","SendButton","Controls","fixed","bg","Header","DrawApp","updateSTL","setStlSettings","text","depth","foundation_depth","foundation_offset","foundation_joiner_height","text_spacing","class","font","Check","defaultChecked","label","Viewer","stlUrl","fetchStlError","aspectgRatio","rotationSpeeds","initControlPosition","backgroundColor","fetchRetry","options","retries","ok","STLGenerator","setStlUrl","stlSettings","setfetchStlError","sendGenerateSTL","App","userString","getUser","saveUser","useUser","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.68a86b72.chunk.js","sourcesContent":["import { useState, createContext } from \"react\";\n\nexport const UserContext = createContext();\n\nexport function useUser() {\n  const getUser = () => {\n    try {\n      const userString = localStorage.getItem(\"user\");\n      const user = userString ? JSON.parse(userString) : null;\n      return user;\n    } catch (e) {\n      console.log(\"Error getting user from localStorage\", e);\n    }\n    return null;\n  };\n  const [user, setUser] = useState(getUser());\n\n  const saveUser = (user) => {\n    localStorage.setItem(\"user\", JSON.stringify(user));\n    setUser(user);\n  };\n\n  const removeUser = () => {\n    saveUser(null);\n  };\n\n  return {\n    setUser: saveUser,\n    user,\n    removeUser,\n  };\n}\n","import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\nimport \"firebase/analytics\";\n\nexport const firebaseConfig = {\n  apiKey: \"AIzaSyBP3MDb5upM0oEEHnCKp5GYX0OUowkbvQE\",\n  authDomain: \"kadzama3dprinter.firebaseapp.com\",\n  projectId: \"kadzama3dprinter\",\n  storageBucket: \"kadzama3dprinter.appspot.com\",\n  messagingSenderId: \"957194061920\",\n  appId: \"1:957194061920:web:463d3b0992b64378139b05\",\n  measurementId: \"G-X5N8W274ZC\",\n};\n\nexport const storageUserFolder = \"user\";\nexport const firestoreUserDrawingCollection = \"user-drawing\";\nexport const firestoreModelsCollectionPath = \"storage/model-library/public\";\nexport const firestoreTagsCollectionPath = \"storage/model-library/tags\";\nexport const userDrawingGcodeFilename = \"drawing.gcode\";\n\nexport const firestoreAutoId = () => {\n  const CHARS =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n  let autoId = \"\";\n\n  for (let i = 0; i < 20; i++) {\n    autoId += CHARS.charAt(Math.floor(Math.random() * CHARS.length));\n  }\n  return autoId;\n};\n\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const db = firebase.firestore();\nexport const storage = firebase.storage();\nexport const analytics = firebase.analytics();\n\nexport const firestoreUserDrawingDocument = (uid) => {\n  return db.collection(firestoreUserDrawingCollection).doc(uid);\n};\n\nexport const firestoreModelsCollection = () => {\n  return db.collection(firestoreModelsCollectionPath);\n};\n\nexport const firestoreTagsCollection = () => {\n  return db.collection(firestoreTagsCollectionPath);\n};\n\nexport const retrieveCachedCollection = async (collection) => {\n  try {\n    const now = Date.now();\n    const storageKey = collection.path;\n    const itemsJson = localStorage.getItem(storageKey);\n    const itemsWithTTL = itemsJson ? JSON.parse(itemsJson) : null;\n    const ttl = itemsWithTTL ? itemsWithTTL[\"ttl\"] : null;\n    let items = itemsWithTTL ? itemsWithTTL[\"items\"] : null;\n\n    if (!ttl || now > ttl) {\n      items = null;\n    }\n\n    if (!items) {\n      items = [];\n      // const invalidateAt = now + 5 * 60 * 1000; // 5 minutes\n      const invalidateAt = now + 1000; // 5 minutes\n      const models_data = await collection.get();\n      models_data.docs.forEach((item) => {\n        items = [...items, { ...item.data(), id: item.id }];\n      });\n      localStorage.setItem(\n        storageKey,\n        JSON.stringify({\n          items: items,\n          ttl: invalidateAt,\n        })\n      );\n    }\n    return items;\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const storageUserDrawingGcodeRef = (uid) => {\n  return storage\n    .ref(storageUserFolder)\n    .child(uid)\n    .child(userDrawingGcodeFilename);\n};\n","export default __webpack_public_path__ + \"static/media/logo.8bc7b652.png\";","import React, { useState, useContext } from 'react';\nimport { UserContext } from '../App/useUser';\nimport './Login.css';\nimport { auth } from '../App/firebase';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport logo from '../App/logo.png';\nimport { Link } from 'react-router-dom';\n\n\nexport default function Login() {\n  const { setUser } = useContext(UserContext);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [error, setError] = useState(null);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    await auth.signInWithEmailAndPassword(email, password)\n      .then((user) => {\n        setUser(user);\n      })\n      .catch((error) => {\n        setError(error.message);\n      });\n  }\n\n  return (\n    <div className=\"text-center login-wrapper\">\n        <Form className=\"form-signin\" onSubmit={handleSubmit}>\n          <img className=\"mb-4\" src={logo} alt=\"\" width=\"120\"></img>\n          <h1 className=\"h3 mb-3 font-weight-normal\">Авторизация</h1>\n          <Form.Group controlId=\"inputEmail\">\n            <Form.Label className=\"sr-only\">Email</Form.Label>\n            <Form.Control type=\"email\" placeholder=\"Enter email\" onChange={e => setEmail(e.target.value)} />\n            <Form.Text className=\"text-danger\">\n              {error}\n            </Form.Text>\n          </Form.Group>\n\n          <Form.Group controlId=\"inputPassword\">\n            <Form.Label className=\"sr-only\">Password</Form.Label>\n            <Form.Control type=\"password\" placeholder=\"Password\" onChange={e => setPassword(e.target.value)} />\n          </Form.Group>\n          <Button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">\n            Log in\n          </Button>\n          {/* <Button className=\"btn btn-lg btn-secondary btn-block\"  onClick={() => window.open(\"https://chocolatefiesta.ru/cloud/\", '_blank')}>\n            Получить доступ\n          </Button> */}\n          <Link className=\"nav-link\" to=\"/signup\">Create account</Link>\n        </Form>\n    </div>\n  )\n}\n","import React, { useState, useContext } from 'react';\nimport './Login.css';\nimport { auth } from '../App/firebase';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport logo from '../App/logo.png';\nimport { UserContext } from '../App/useUser';\nimport { Link } from 'react-router-dom';\n\nexport default function SignUp() {\n    const { setUser } = useContext(UserContext);\n    const [email, setEmail] = useState();\n    const [password, setPassword] = useState();\n    const [error, setError] = useState(null);\n\n    const handleSubmit = async e => {\n        e.preventDefault();\n        try {\n            const userCredential = await auth.createUserWithEmailAndPassword(email, password)\n            setUser(userCredential);\n            console.log(userCredential);\n        } catch (e) { \n            setError(e.message) \n        }\n    }\n\n    return (\n        <div className=\"text-center login-wrapper\">\n            <Form className=\"form-signin\" onSubmit={handleSubmit}>\n                <img className=\"mb-4\" src={logo} alt=\"\" width=\"120\"></img>\n                <h1 className=\"h3 mb-3 font-weight-normal\">Create account</h1>\n                <Form.Group controlId=\"inputEmail\">\n                    <Form.Label className=\"sr-only\">Email</Form.Label>\n                    <Form.Control type=\"email\" placeholder=\"Enter email\" onChange={e => setEmail(e.target.value)} />\n                    <Form.Text className=\"text-danger\">\n                        {error}\n                    </Form.Text>\n                </Form.Group>\n\n                <Form.Group controlId=\"inputPassword\">\n                    <Form.Label className=\"sr-only\">Password</Form.Label>\n                    <Form.Control type=\"password\" placeholder=\"Password\" onChange={e => setPassword(e.target.value)} />\n                </Form.Group>\n                <Button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">\n                    Sign up\n                </Button>\n                {/* <Button className=\"btn btn-lg btn-secondary btn-block\"> */}\n                <Link className=\"nav-link\" to=\"/login\">Log in</Link>\n                {/* </Button> */}\n            </Form>\n        </div>\n    )\n}\n","import React from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\nexport default function SettingsForm({updatePlot, setDrawSettings}) {\n\n    return (\n        <>\n            <Form>\n                <Form.Group as={Row}>\n                    <Form.Label column >Расстояние между узлами, мм</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"0.1\" defaultValue=\"2.0\" onChange={e => setDrawSettings({ delta: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Экструзия, ед./мм</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"0.01\" defaultValue=\"0.03\" onChange={e => setDrawSettings({ e_per_mm: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Z, мм</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"0.01\" defaultValue=\"0.25\" onChange={e => setDrawSettings({ z: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Float</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"10\" defaultValue=\"2400\" onChange={e => setDrawSettings({ f: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Размер печати, мм</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"1\" defaultValue=\"120\" onChange={e => setDrawSettings({ print_size_mm: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Размер стола, мм</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"1\" defaultValue=\"200\" onChange={e => setDrawSettings({ table_size_mm: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Оффсет X, мм</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"1\" defaultValue=\"0\" onChange={e => setDrawSettings({ offset_x: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Оффсет Y, мм</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"1\" defaultValue=\"0\" onChange={e => setDrawSettings({ offset_y: e.target.value })} />\n                    </Col>\n                </Form.Group>\n                <Form.Group as={Row}>\n                    <Form.Label column >Экструдер</Form.Label>\n                    <Col >\n                        <Form.Control size=\"sm\" type=\"number\" step=\"1\" min=\"0\" max=\"1\" defaultValue=\"0\" onChange={e => setDrawSettings({ tool: e.target.value })} />\n                    </Col>\n                </Form.Group>\n            </Form>\n            <Button onClick={() => updatePlot()}>Обновить</Button>\n            \n        </>\n    );\n}\n\n\n","export const fiestaCloudBackend = process.env.REACT_APP_CLOUD_API_URL;","import React, {useEffect} from 'react';\nimport Plot from 'react-plotly.js';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Alert from 'react-bootstrap/Alert';\n\n\nexport default function PlotViewer(props) {\n    useEffect(() => {}, [props.plotData, props.fetchError]); \n\n    if (props.fetchError) {\n        return (<>\n            <Alert variant='danger'>\n                {props.fetchError}\n            </Alert>\n        </>)\n    }\n\n    if (!props.plotData) {\n        return (<>\n            <Spinner animation=\"border\" role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n            </Spinner>\n        </>)\n      }\n  return (\n    <>\n        <Plot data={props.plotData.data} layout={{ showlegend: false, xaxis: { scaleanchor: \"y\", scaleratio: 1 }, height: window.innerHeight * 0.6 }} />\n    </>\n  );\n}\n","import React, { useContext, useState, useEffect, useReducer } from 'react';\nimport { UserContext } from '../App/useUser'\nimport Button from 'react-bootstrap/Button';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport SettingsForm from './SettingsForm';\nimport { storageUserDrawingGcodeRef } from '../App/firebase'\nimport { fiestaCloudBackend } from '../App/config';\nimport PlotViewer from './PlotViewer';\nimport * as Sentry from \"@sentry/react\";\n\n\nfunction reducer(state, item) {\n  return { ...state, ...item }\n}\n\nfunction getGcodeUrl(uid) {\n  return storageUserDrawingGcodeRef(uid).getDownloadURL()\n    .catch(function (error) {\n      console.log(error)\n    })\n}\n\nexport default function DrawPrint() {\n  const { user } = useContext(UserContext);\n  const user_id = user.user.uid;\n  const [gcodeFileUrl, setGcodeFileUrl] = useState('#');\n  const [plot, setPlot] = useState(null);\n  const [fetchError, setFetchError] = useState(null);\n  const [drawSettings, setDrawSettings] = useReducer(reducer, {});\n\n  function getUserDrawingPlot(uid, settings) {\n    setFetchError(null);\n    setFetchError(null);\n    setPlot(null);\n    return fetch(fiestaCloudBackend + '/api/user/' + uid + \"/drawing/\", {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(settings)\n    })\n      .then(res => {\n        if (res.status === 201 || res.status === 200) {\n          return res.json()\n        } else if (res.status === 204) {\n          setFetchError('Рисунок не найден. Перейдите на страницу \"Рисование\" и отправьте рисунок в печать');\n        } else {\n          setFetchError('Ошибка загрузки рисунка. Попробуйте позже.');\n        }\n        throw new Error(res)\n      })\n      .then(data => {\n        setPlot(JSON.parse(data))\n      })\n      .catch(error => {\n        Sentry.captureException(new Error(error));\n      })\n  }\n\n  function updatePlot() {\n    getUserDrawingPlot(user_id, drawSettings)\n    getGcodeUrl(user_id).then(url => setGcodeFileUrl(url));\n  }\n\n  useEffect(() => {\n    let mounted = true;\n    getGcodeUrl(user_id)\n      .then(url => {\n        if (mounted) {\n          setGcodeFileUrl(url)\n        }\n      })\n    getUserDrawingPlot(user_id, {})\n    return () => mounted = false;\n  }, [user_id])\n\n  return (\n    <>\n      <Container fluid=\"xl\">\n        <Row>\n          <Col sm={8}>\n            <PlotViewer fetchError={fetchError} plotData={plot}></PlotViewer>\n          </Col>\n          <Col sm={4} >\n            <SettingsForm updatePlot={updatePlot} setDrawSettings={setDrawSettings} />\n          </Col>\n        </Row>\n        <Row>\n          <Col >\n            <Button as=\"a\" target=\"_blank\" href={gcodeFileUrl} className=\"control-button\" size=\"lg\" variant=\"primary\" download>Скачать GCODE</Button>\n            <Button as=\"a\" target=\"_blank\" href='/draw' className=\"control-button\" size=\"lg\" variant=\"secondary\">Рисование</Button>\n            <Button disabled={true} className=\"control-button\" variant=\"secondary\" size=\"lg\">Отправить в печать</Button>\n          </Col>\n        </Row>\n      </Container>\n\n    </>\n  );\n}\n","import { useState, createContext } from 'react';\n\n\nexport const ModelContext = createContext();\n\nexport function useModel() {\n  const [currentModel, setCurrentModel] = useState(null);\n\n  const cleanCurrentModel = () => {\n    setCurrentModel(null);\n  };\n\n  return {\n    currentModel,\n    setCurrentModel,\n    cleanCurrentModel\n  }\n}","import React, { useContext } from 'react';\nimport { Card, Badge } from 'react-bootstrap';\nimport { ModelContext } from './ModelContext';\nimport './Model.css';\n\n\nexport default function ModelCard({ model, ...props }) {\n    const { setCurrentModel } = useContext(ModelContext);\n\n    function getThumbnailImage(images) {\n        let thumbnail;\n        images.some((el) => {\n            thumbnail = el.image.src;\n            return el.is_thumbnail;\n        });\n        return thumbnail;\n    }\n\n    return (\n        <>\n            <Card className=\"model-card\" key={model.id} onClick={() => setCurrentModel(model)} role=\"button\">\n                <Card.Img className=\"model-card-image\" variant=\"top\" src={getThumbnailImage(model.images)} />\n                <Card.Body>\n                    <Card.Title>{model.name}</Card.Title>\n                    <Card.Text>\n                        <span dangerouslySetInnerHTML={{ __html: model.description }} />\n                    </Card.Text>\n                    <Badge variant=\"secondary\">{model.print_time} минут</Badge>{' '}\n                    <Badge variant=\"secondary\">{model.pieces_num} шт.</Badge>{' '}\n                    <Badge variant=\"secondary\">{model.piece_size}</Badge>{' '}\n                    <Badge variant=\"secondary\">{model.colors_num}</Badge>{' '}\n                </Card.Body>\n            </Card>\n\n        </>\n    )\n}\n","import React, { useState, useEffect } from 'react';\nimport { Form, Container, Row, Col, Tab, Nav, Spinner } from 'react-bootstrap';\nimport { firestoreModelsCollection, firestoreTagsCollection, retrieveCachedCollection } from '../../App/firebase';\nimport ModelCard from './ModelCard';\nimport './ModelList.css';\n\n\nexport default function ModelList() {\n  const [models, setModels] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTagId, setSelectedTagId] = useState(null);\n  const [isLoading, setLoading] = useState(false);\n\n  const fetchModels = async () => {\n    setLoading(true);\n    let items = await retrieveCachedCollection(firestoreModelsCollection().orderBy(\"name\"));\n    setModels(prevState => {\n      return [...items];\n    });\n\n    let tags = await retrieveCachedCollection(firestoreTagsCollection().orderBy(\"name\"));\n    setTags(prevState => {\n      return [...tags];\n    });\n    setLoading(false);\n  }\n\n  const filteredModels = () => {\n    let filtered_models = [...models];\n    if (selectedTagId) {\n      filtered_models = filtered_models.filter((e) => {\n        return e.tag_ids?.includes(selectedTagId)\n      })\n    }\n    return filtered_models.filter(\n      (e) => { return e.name.toUpperCase().includes(searchQuery.toUpperCase()) }\n    )\n  }\n\n  useEffect(() => {\n    fetchModels();\n  }, [])\n\n  return (\n    <div className=\"model-list-wrapper\">\n      <Container>\n\n        <Row className=\"model-tags-row\">\n          <Tab.Container id=\"model-tags-tabs\" defaultActiveKey=\"0\">\n            <Nav variant=\"pills\">\n              <Nav.Item>\n                <Nav.Link disabled eventKey=\"-1\">Категории</Nav.Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Nav.Link eventKey=\"0\" onClick={e => setSelectedTagId(null)}>Все модели</Nav.Link>\n              </Nav.Item>\n              {\n                tags && tags.map((tag, idx) => {\n                  return (\n                    <>\n                      <Nav.Item>\n                        <Nav.Link eventKey={tag.id} onClick={e => setSelectedTagId(tag.id)}>{tag.name}</Nav.Link>\n                      </Nav.Item>\n                    </>\n                  )\n                }\n                )\n              }\n            </Nav>\n          </Tab.Container>\n        </Row>\n\n        <Form>\n          <Form.Row>\n            <Col>\n              <Form.Control type=\"text\" placeholder=\"Поиск\" onChange={e => setSearchQuery(e.target.value)} />\n            </Col>\n          </Form.Row>\n        </Form>\n\n        <Row>\n          {isLoading &&\n            <Row className='spiner-wrapper'><Spinner animation=\"border\" role=\"status\">\n              <span className=\"visually-hidden\"></span>\n            </Spinner></Row>}\n          {\n            models && filteredModels().map((model, idx) => {\n              return (\n                <>\n                  <ModelCard key={model.id} model={model} />\n                </>\n              )\n            }\n            )\n          }\n        </Row>\n      </Container>\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { Button, Carousel, Row, Col, Badge } from 'react-bootstrap';\nimport { ModelContext } from './ModelContext';\n\nexport default function ModelPage() {\n    const { currentModel: model, cleanCurrentModel } = useContext(ModelContext);\n\n    return (\n        <>\n            <Button variant=\"link\" onClick={cleanCurrentModel}>⟵ Вернуться назад</Button>\n            <Row>\n                <Col sm={5}>\n                    <Carousel>\n                        {model.images.map(image => {\n                            return (\n                                <Carousel.Item>\n                                    <img\n                                        className=\"d-block w-100\"\n                                        src={image.image.src}\n                                        alt=\"First slide\"\n                                    />\n                                </Carousel.Item>)\n                        })}\n                    </Carousel>\n                </Col>\n                <Col sm={7} >\n                    <h2>{model.name}</h2>\n                    <span dangerouslySetInnerHTML={{ __html: model.description }} />\n                    <h4>\n                        <Badge variant=\"secondary\">{model.print_time} минут</Badge>{' '}\n                        <Badge variant=\"secondary\">{model.pieces_num} шт.</Badge>{' '}\n                        <Badge variant=\"secondary\">{model.piece_size}</Badge>{' '}\n                        <Badge variant=\"secondary\">{model.colors_num}</Badge>{' '}\n                    </h4>\n                    <h4>Файлы</h4>\n                    <ul>\n                        {model.files.map(file => {\n                            return (\n                                <li>\n                                    <Button as=\"a\" target=\"_blank\" variant=\"link\" href={file.file.src} download={file.file.title}>\n                                        {file.name || file.file.title}\n                                    </Button>\n                                </li>\n                            )\n                        })}\n                    </ul>\n                </Col>\n            </Row>\n        </>\n    )\n}\n","import React from 'react';\nimport ModelList from './Model/ModelList';\nimport ModelPage from './Model/ModelPage';\nimport './Library.css';\nimport { ModelContext, useModel } from './Model/ModelContext';\nimport { Container } from 'react-bootstrap';\n\n\nexport default function Library() {\n  const { currentModel, setCurrentModel, cleanCurrentModel } = useModel();\n\n  if (!currentModel) {\n    return (\n      <div className=\"wrapper\">\n        <ModelContext.Provider value={{ currentModel, setCurrentModel, cleanCurrentModel }} >\n          <Container fluid=\"xl\" >\n            <h2>Библиотека моделей</h2>\n            <ModelList />\n          </Container>\n\n        </ModelContext.Provider>\n      </div >\n\n    );\n  }\n\n  return (\n    <div className=\"wrapper\">\n      <ModelContext.Provider value={{ currentModel, setCurrentModel, cleanCurrentModel }} >\n        <Container fluid=\"xl\" >\n          <ModelPage />\n        </Container>\n\n\n      </ModelContext.Provider>\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport { UserContext } from '../App/useUser';\nimport { createUseStyles } from 'react-jss';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = createUseStyles({\n    wrapper: {\n        padding: [15],\n    }\n});\n\nexport default function Navigation() {\n    const classes = useStyles();\n    const { user, removeUser } = useContext(UserContext);\n\n    return (\n        <div className={classes.wrapper}>\n            <Navbar className=\"justify-content-between\" expand=\"lg\">\n                <Navbar.Brand>\n                    <Link className=\"navbar-brand\" to=\"/\">Chocolate Fiesta Cloud β</Link>\n                </Navbar.Brand>\n                <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n                <Navbar.Collapse id=\"basic-navbar-nav\">\n                    <Nav className=\"mr-auto\">\n                        <Link className=\"nav-link\" to=\"/library\">Models Library</Link>\n                        <Link className=\"nav-link\" to=\"/draw-print\">Drawing Print</Link>\n                        <Link className=\"nav-link\" to=\"/stl-generator\">3D Text Generator</Link>\n                    </Nav>\n                    <Nav className=\"ml-auto\">\n                        <Nav.Link disabled={true}>You are logged in as {user.user.email}</Nav.Link>\n                        <Nav.Link onClick={removeUser}>Log out</Nav.Link>\n                    </Nav>\n                </Navbar.Collapse>\n            </Navbar>\n        </div>\n    );\n}","import React from 'react';\nimport './Slicer.css';\n\n\nexport default function Slicer() {\n    return (\n        <div className=\"dash-wrapper\">\n            <h2>Привет, это Chocolate Fiesta Cloud</h2>\n        </div>\n    );\n}\n","import React, { useContext, useRef, useState } from \"react\";\n\nexport const CanvasContext = React.createContext();\n\n\nexport const CanvasProvider = ({ children }) => {\n  const [isPrepared, setPrepared] = useState(false)\n  const [isDrawing, setIsDrawing] = useState(false)\n  const canvasRef = useRef(null);\n  const contextRef = useRef(null);\n  const [x, setX] = useState([]);\n  const [y, setY] = useState([]);\n  const [stops, setStops] = useState([]);\n\n  const prepareCanvas = () => {\n    if (isPrepared) { return }\n    const navbarHeight = 64;\n    const canvas = canvasRef.current\n    const canvasSize = Math.min(window.innerWidth, window.innerHeight - navbarHeight * 2)\n    canvas.width = canvasSize * 2;\n    canvas.height = canvasSize * 2;\n    canvas.style.width = `${canvasSize}px`;\n    canvas.style.height = `${canvasSize}px`;\n\n    const context = canvas.getContext(\"2d\")\n    context.scale(2, 2);\n    context.lineCap = \"round\";\n    context.strokeStyle = \"brown\";\n    context.lineWidth = 14;\n    contextRef.current = context;\n    setPrepared(true);\n  };\n\n  const startDrawing = ({ nativeEvent }) => {\n    const { offsetX, offsetY } = getEventPosition(nativeEvent);\n    contextRef.current.beginPath();\n    contextRef.current.moveTo(offsetX, offsetY);\n    setIsDrawing(true);\n  };\n\n  const finishDrawing = () => {\n    contextRef.current.closePath();\n    setIsDrawing(false);\n    setStops([...stops, x.length - 1]);\n  };\n\n  const draw = ({ nativeEvent }) => {\n    if (!isDrawing) {\n      return;\n    }\n    const { offsetX, offsetY } = getEventPosition(nativeEvent);\n    contextRef.current.lineTo(offsetX, offsetY);\n    contextRef.current.stroke();\n    setX([...x, offsetX]);\n    setY([...y, offsetY]);\n  };\n\n  const getEventPosition = (nativeEvent) => {\n    if (nativeEvent.type === \"mousemove\" || nativeEvent.type === \"mousedown\") {\n      const { offsetX, offsetY } = nativeEvent;\n      return {offsetX, offsetY}\n    } else if (nativeEvent.type === \"touchstart\" || nativeEvent.type === \"touchmove\") {\n      const rect = nativeEvent.target.getBoundingClientRect(); \n      const offsetX = nativeEvent.touches[0].pageX - rect.left;\n      const offsetY = nativeEvent.touches[0].pageY - rect.top;;\n      return {offsetX, offsetY}\n    }\n  };\n\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\")\n    context.fillStyle = \"white\"\n    context.fillRect(0, 0, canvas.width, canvas.height)\n    setX([]);\n    setY([]);\n    setStops([]);\n  }\n\n  return (\n    <CanvasContext.Provider\n      value={{\n        canvasRef,\n        contextRef,\n        x,\n        y,\n        stops,\n        isPrepared,\n        prepareCanvas,\n        startDrawing,\n        finishDrawing,\n        clearCanvas,\n        draw\n      }}\n    >\n      {children}\n    </CanvasContext.Provider>\n  );\n};\n\nexport const useCanvas = () => useContext(CanvasContext);\n","import React, { useEffect } from \"react\";\nimport { useCanvas } from \"./CanvasContext\";\nimport \"./Canvas.css\";\n\nexport function Canvas() {\n  const {\n    canvasRef,\n    prepareCanvas,\n    startDrawing,\n    finishDrawing,\n    draw,\n  } = useCanvas();\n\n  useEffect(prepareCanvas, [prepareCanvas]);\n\n  return (\n    <canvas\n      onMouseDown={startDrawing}\n      onMouseUp={finishDrawing}\n      onMouseMove={draw}\n\n      onTouchStart={startDrawing}\n      onTouchEnd={finishDrawing}\n      onTouchMove={draw}\n\n      ref={canvasRef}\n    />\n  );\n}","import React, { useContext, useState, useEffect } from \"react\";\nimport Button from 'react-bootstrap/Button';\n\nimport \"./Controls.css\"\nimport { useCanvas } from '../Canvas/CanvasContext'\nimport { UserContext } from '../../App/useUser';\nimport { firestoreUserDrawingDocument } from '../../App/firebase'\n\n\nexport function SendToPrintButton() {\n  const { user } = useContext(UserContext);\n  const { x, y, stops } = useCanvas();\n  const [isDisabled, setDisabled] = useState(false);\n\n  useEffect(() => {\n    setDisabled(false);\n  }, [x])\n\n  function sendToDB() {\n    return firestoreUserDrawingDocument(user.user.uid)\n      .set({\n        x: x,\n        y: y,\n        stops: stops\n      })\n  }\n\n  function SendButton() {\n    const [isLoading, setLoading] = useState(false);\n    \n    useEffect(() => {\n      if (isLoading) {\n        sendToDB().then(() => {\n          setLoading(false);\n          setDisabled(true);\n        });\n      }\n    }, [isLoading]);\n\n    const handleClick = () => {\n      setLoading(true);\n    }\n\n    return (\n      <Button\n        disabled={isLoading || isDisabled || x.length === 0}\n        className=\"control-button\" size=\"lg\" variant=\"success\"\n        onClick={!isLoading ? handleClick : null}\n      >\n        {isLoading ? 'Отправка...' : isDisabled ? 'Отправлено' : 'Отправить в печать'}\n      </Button>\n    );\n  }\n\n  return (<SendButton />);\n}\n","import React from \"react\";\nimport Button from 'react-bootstrap/Button';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport \"./Controls.css\"\nimport { useCanvas } from '../Canvas/CanvasContext'\nimport { SendToPrintButton } from \"./SendToPrintButton\";\n\nexport function Controls() {\n  const { x, clearCanvas } = useCanvas()\n  return (\n    <>\n      <div className=\"controls-wrapper\">\n        <Navbar fixed=\"bottom\" bg=\"dark\" className=\"justify-content-center\">\n          <Nav>\n            <Button onClick={clearCanvas} disabled={x.length === 0} className=\"control-button\" size=\"lg\" variant=\"light\">Очистить</Button>\n            <SendToPrintButton />\n          </Nav>\n        </Navbar>\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\n\nexport function Header() {\n    return (\n        <>\n            <div>\n                <Navbar bg=\"dark\" variant=\"dark\" className=\"justify-content-center\">\n                    <Navbar.Brand href=\"/\">\n                        Chocolate Fiesta Draw\n                    </Navbar.Brand>\n                    <Navbar.Collapse id=\"basic-navbar-nav\">\n                        <Nav className=\"ml-auto\">\n                            <Nav.Link href=\"/draw-print\">Перейти к печати</Nav.Link>\n                        </Nav>\n                    </Navbar.Collapse>\n                </Navbar>\n            </div>\n        </>\n    );\n}\n","import React from 'react'\nimport { Canvas } from './Canvas/Canvas'\nimport { Controls } from './Controls/Controls'\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { CanvasProvider } from \"./Canvas/CanvasContext\";\nimport { firebaseConfig } from '../App/firebase'\nimport { FirestoreProvider } from \"@react-firebase/firestore\";\nimport \"./DrawApp.css\"\nimport { Header } from './Header/Header';\n\n\nfunction DrawApp() {\n  return (\n    <>\n    <div className=\"draw-app-wrapper\">\n      <FirestoreProvider {...firebaseConfig} firebase={firebase}>\n        <CanvasProvider>\n          <Header />\n          <Canvas />\n          <Controls />\n        </CanvasProvider>\n      </FirestoreProvider>\n      </div>\n    </>\n  );\n}\n\nexport default DrawApp;\n","import React from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport \"./SettingsForm.css\";\n\nexport default function SettingsForm({ updateSTL, setStlSettings }) {\n  const fontsList = [\n    { value: \"Pacifico\", title: \"Pacifico\", class: \"fontPacifico\" },\n    {\n      value: \"Liberation Sans:style=Bold\",\n      title: \"Sans Bold\",\n      class: \"fontPTSans\",\n    },\n    {\n      value: \"Liberation Serif:style=Bold Italic\",\n      title: \"Serif Bold\",\n      class: \"fontPTSerif\",\n    },\n    {\n      value: \"Raleway:style=Black\",\n      title: \"Raleway Black\",\n      class: \"fontRaleway\",\n    },\n    { value: \"Lobster\", title: \"Lobster\", class: \"fontLobster\" },\n    { value: \"Vollkorn:style=Black\", title: \"Vollkorn\", class: \"fontVollkorn\" },\n    {\n      value: \"Alegreya Sans:style=Black Italic\",\n      title: \"Alegreya Sans\",\n      class: \"fontAlegreya\",\n    },\n    { value: \"Vesterbro\", title: \"Vesterbro\", class: \"fontVollkorn\" },\n  ];\n\n  return (\n    <>\n      <Form>\n        <Form.Group as={Row}>\n          <Form.Label column>Text</Form.Label>\n          <Col>\n            <Form.Control\n              size=\"sm\"\n              type=\"text\"\n              defaultValue=\"Chocolate Fiesta\"\n              onChange={(e) => setStlSettings({ text: e.target.value })}\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row}>\n          <Form.Label column>Heigth, mm</Form.Label>\n          <Col>\n            <Form.Control\n              size=\"sm\"\n              type=\"number\"\n              step=\"1\"\n              defaultValue=\"5\"\n              onChange={(e) => setStlSettings({ depth: e.target.value })}\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row}>\n          <Form.Label column>Width, mm</Form.Label>\n          <Col>\n            <Form.Control\n              size=\"sm\"\n              type=\"number\"\n              step=\"1\"\n              defaultValue=\"100\"\n              onChange={(e) => setStlSettings({ width: e.target.value })}\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row}>\n          <Form.Label column>Heigth of foundation, mm</Form.Label>\n          <Col>\n            <Form.Control\n              size=\"sm\"\n              type=\"number\"\n              step=\"10\"\n              defaultValue=\"2\"\n              onChange={(e) =>\n                setStlSettings({ foundation_depth: e.target.value })\n              }\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row}>\n          <Form.Label column>Width of foundation, mm</Form.Label>\n          <Col>\n            <Form.Control\n              size=\"sm\"\n              type=\"number\"\n              step=\"0.1\"\n              defaultValue=\"2\"\n              onChange={(e) =>\n                setStlSettings({ foundation_offset: e.target.value })\n              }\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row}>\n          <Form.Label column>Word merger foundation width, mm</Form.Label>\n          <Col>\n            <Form.Control\n              size=\"sm\"\n              type=\"number\"\n              step=\"1\"\n              defaultValue=\"7\"\n              onChange={(e) =>\n                setStlSettings({ foundation_joiner_height: e.target.value })\n              }\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row}>\n          <Form.Label column>Letter spacing, mm</Form.Label>\n          <Col>\n            <Form.Control\n              size=\"sm\"\n              type=\"number\"\n              defaultValue=\"1.0\"\n              onChange={(e) => setStlSettings({ text_spacing: e.target.value })}\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row}>\n          <Form.Label column>Font</Form.Label>\n          <Col>\n            <div key=\"defaultradio\" className=\"mb-3\">\n              {fontsList.map((font, id) => {\n                return (\n                  <Form.Check\n                    defaultChecked={id === 0}\n                    id={font.value}\n                    type=\"radio\"\n                    label={font.title}\n                    name=\"radio-font\"\n                    className={font.class}\n                    key={font.value}\n                    onChange={(e) => {\n                      console.log(\"UPDATE STATE\");\n                      setStlSettings({ font: e.target.id });\n                    }}\n                  />\n                );\n              })}\n            </div>\n          </Col>\n        </Form.Group>\n      </Form>\n      <Button onClick={() => updateSTL()}>Generate</Button>\n    </>\n  );\n}\n","import { ModelViewer } from 'react-3d-model-viewer'\nimport React, { useEffect } from 'react';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Alert from 'react-bootstrap/Alert';\n\nimport \"./STLGenerator.css\"\n\nexport default function Viewer(props) {\n    useEffect(() => { }, [props.stlUrl, props.fetchStlError]);\n\n    if (props.fetchStlError) {\n        return (<>\n            <Alert variant='danger'>\n                Возникла ошибка генерации модели, пожалуйста, попробуйте снова.\n            </Alert>\n        </>)\n    }\n\n    if (props.stlUrl === '') {\n        return (<>\n            <Alert variant='primary'>\n                Выполняется генерация модели. Процесс может занять до 1 минуты.\n            </Alert>\n            <Spinner animation=\"border\" role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n            </Spinner>\n        </>)\n    }\n    return (\n        <>\n            <ModelViewer width=\"100%\" aspectgRatio=\"100%\" rotationSpeeds={[0, 0, 0]} initControlPosition={[0, 0, 0.4]} backgroundColor=\"#ffffff\" url={props.stlUrl} />\n        </>\n    );\n}\n","import React, { useContext, useState, useEffect, useReducer } from 'react';\nimport { UserContext } from '../App/useUser'\nimport Button from 'react-bootstrap/Button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\n\nimport SettingsForm from './SettingsForm';\nimport \"./STLGenerator.css\"\nimport { fiestaCloudBackend } from '../App/config';\nimport Viewer from './Viewer';\nimport * as Sentry from \"@sentry/react\";\n\n\nfunction reducer(state, item) {\n  return { ...state, ...item }\n}\n\nfunction fetchRetry(url, options = {}, retries = 3) {\n  return fetch(url, options)\n    .then(res => {\n      if (res.ok) {\n        return res.json()\n      }\n      if (retries > 0) {\n        return fetchRetry(url, options, retries - 1)\n      } else {\n        throw new Error(res)\n      }\n    })\n    .catch(error => {\n      if (retries > 0) {\n        return fetchRetry(url, options, retries - 1)\n      } else {\n        throw new Error(error)\n      }\n    }\n    )\n}\n\nexport default function STLGenerator() {\n  const { user } = useContext(UserContext);\n  const user_id = user.user.uid;\n  const [stlUrl, setStlUrl] = useState('');\n  const [stlSettings, setStlSettings] = useReducer(reducer, {});\n  const [fetchStlError, setfetchStlError] = useState(false);\n\n  function sendGenerateSTL(uid, settings) {\n    setStlUrl('');\n    setfetchStlError(false);\n    return fetchRetry(fiestaCloudBackend + '/api/stl-generator/', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(settings),\n    })\n      .then(data => {\n        if (data) {\n          setStlUrl(data.url)\n        } else {\n          setfetchStlError(true);\n          Sentry.captureException(new Error(data));\n        }\n      })\n      .catch(error => {\n        setfetchStlError(true);\n        Sentry.captureException(new Error(error));\n      })\n  }\n\n  function updateSTL() {\n    sendGenerateSTL(user_id, stlSettings);\n  }\n\n  useEffect(() => {\n    let mounted = true;\n    sendGenerateSTL(user_id, {}).then(data => {\n      if (mounted && data != null) {\n        setStlUrl(data.url)\n      }\n    });\n    return () => mounted = false;\n  }, [user_id])\n\n  return (\n    <>\n      <Container fluid=\"xl\" className=\"stl-generator-wrapper\">\n        <Row>\n          <Col sm={7}>\n            <Viewer fetchStlError={fetchStlError} stlUrl={stlUrl}></Viewer>\n          </Col>\n          <Col sm={5} >\n            <SettingsForm updateSTL={updateSTL} setStlSettings={setStlSettings} />\n          </Col>\n        </Row>\n        <Row>\n          <Col >\n            <Button as=\"a\" target=\"_blank\" href={stlUrl} className=\"control-button\" size=\"lg\" variant=\"primary\" download>Download STL</Button>\n            <Button disabled={true} className=\"control-button\" size=\"lg\" variant=\"primary\">Send to printer</Button>\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n}\n","import React from 'react';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\n\nimport './App.css';\nimport Login from '../Auth/Login';\nimport Signup from '../Auth/Signup';\nimport DrawPrint from '../DrawPrint/DrawPrint';\nimport Library from '../Library/Library';\nimport Navigation from '../Navigation/Navigation';\nimport Slicer from '../Slicer/Slicer';\nimport { useUser, UserContext } from './useUser';\nimport DrawApp from '../DrawApp/DrawApp';\nimport STLGenerator from '../STLGenerator/STLGenerator';\n\nfunction App() {\n  const { user, setUser, removeUser } = useUser();\n\n  return (\n\n    <UserContext.Provider value={{ user, setUser, removeUser }} >\n\n      <BrowserRouter>\n        {user ?\n          <Switch>\n            <Route exact path=\"/draw\">\n              <DrawApp />\n            </Route>\n            <Route path=\"/\">\n              <Navigation />\n              <Route path=\"/draw-print\">\n                <DrawPrint />\n              </Route>\n              <Route path=\"/library\">\n                <Library />\n              </Route>\n              <Route path=\"/slicer\">\n                <Slicer />\n              </Route>\n              <Route path=\"/stl-generator\">\n                <STLGenerator />\n              </Route>\n              <Route path=\"/*\">\n                <Redirect to=\"/draw-print\" />\n              </Route>\n            </Route>\n            \n          </Switch>\n          :\n          <Switch>\n            <Route path=\"/login\">\n              <Login/>\n            </Route>\n            <Route path=\"/signup\">\n              <Signup/>\n            </Route>\n            <Route path=\"/*\">\n              <Redirect to=\"/login\" />\n            </Route>\n          </Switch>\n        }\n\n      </BrowserRouter>\n    </UserContext.Provider>\n\n  );\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\n\nSentry.init({\n  dsn: \"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853\",\n  integrations: [new Integrations.BrowserTracing()],\n  tracesSampleRate: 1.0,\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}